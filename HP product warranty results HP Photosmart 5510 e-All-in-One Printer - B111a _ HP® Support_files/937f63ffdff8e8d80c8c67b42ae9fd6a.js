Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;(function(){try{var _=window.__lodash;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var VolatileDataLayer=function(){function VolatileDataLayer(){this.volatileStore={}}VolatileDataLayer.prototype.get=function(key){return this.volatileStore[key]};
VolatileDataLayer.prototype.set=function(key,value){this.volatileStore[key]=value};return VolatileDataLayer}();var CookieDataLayer=function(_super){__extends(CookieDataLayer,_super);function CookieDataLayer(cookieSettings){_super.call(this);var me=this,setVolatileOnly=_super.prototype.set;me.defaultCookieSettings=cookieSettings;_.each(document.cookie.split("; "),function(item){var tmp=/^([^\=]+)\=(.*)/.exec(item);try{setVolatileOnly(tmp[1],tmp[2])}catch(e){}})}CookieDataLayer.prototype.set=function(key,
value,cookieSettings){var thisCookieSettings;thisCookieSettings={session:true};thisCookieSettings=cookieSettings||this.defaultCookieSettings||thisCookieSettings;var expires=new Date;if(!thisCookieSettings.session)if(thisCookieSettings.expiresInNumberOfDays)expires.setTime((new Date).getTime()+36E5*24*thisCookieSettings.expiresInNumberOfDays);else if(!!thisCookieSettings.expires)expires=thisCookieSettings.expires;else expires=new Date;var cookieString=key+"\x3d"+escape(value)+(!thisCookieSettings.session?
"; expires\x3d"+expires:"")+(!!thisCookieSettings.domain?"; domain\x3d"+thisCookieSettings.domain:"")+(!!thisCookieSettings.path?"; path\x3d"+thisCookieSettings.path:"");document.cookie=cookieString;if(location.href.indexOf("testPropensity\x3dtrue")!==-1)console.log("Writing Propensity Cookie: "+cookieString);_super.prototype.set.call(this,key,value);return cookieString};CookieDataLayer.prototype.remove=function(key){document.cookie=key+"\x3d; expires\x3dThu, 01 Jan 1970 00:00:01 GMT;"};return CookieDataLayer}(VolatileDataLayer);
var Condition=function(){function Condition(){this.matches=false;this.metric=0;this.weight=1}Condition.prototype.getWeight=function(){return this.weight};Condition.prototype.getMetric=function(){return this.metric};Condition.prototype.setWeight=function(w){return this.weight=w};Condition.prototype.setMetric=function(m){return this.metric=m};Condition.prototype.compute=function(){return this.matches};return Condition}();var GeneralStringMatchCondition=function(_super){__extends(GeneralStringMatchCondition,
_super);function GeneralStringMatchCondition(generalStringMatchCriteria,searchString){_super.call(this);this.matchConditions=generalStringMatchCriteria;this.searchString=searchString}GeneralStringMatchCondition.prototype.compute=function(incrementMetric,weight){var targetLocation=this.searchString||window.location.href,defaultStringMatch;if(!!this.matchConditions.regExp)this.matches=this.matchConditions.regExp.test(targetLocation);else{defaultStringMatch=this.matchConditions.matchString||"";this.matches=
targetLocation.indexOf(defaultStringMatch)!==-1}if(this.matches){if(typeof weight!=="undefined")_super.prototype.setWeight.call(this,weight);if(typeof incrementMetric!=="undefined")_super.prototype.setMetric.call(this,_super.prototype.getMetric.call(this)+incrementMetric)}return this.matches};return GeneralStringMatchCondition}(Condition);var RecencyCondition=function(_super){__extends(RecencyCondition,_super);function RecencyCondition(recencyCookieName,persistentCookieSettings){_super.call(this);
this.recencyCookieName=recencyCookieName;this.recencySessionCookieName=recencyCookieName+"_s";this.persistentCookieSettings=persistentCookieSettings||{}}RecencyCondition.prototype.compute=function(){var cookie=new CookieDataLayer(this.persistentCookieSettings);var now=Math.round((new Date).getTime()/1E3);function checkForVisitStart(recencySessionCookieName){return!cookie.get(recencySessionCookieName)}function updateCookieWithLatestTime(recencyCookieName){var c=cookie.set(recencyCookieName,now)}function updateCookiesAtVisitStart(recencyCookieName,
recencySessionCookieName){if(!cookie.get(recencyCookieName))cookie.set(recencyCookieName,now);var c=cookie.set(recencySessionCookieName,cookie.get(recencyCookieName),{session:true}||now);updateCookieWithLatestTime(recencyCookieName)}function getLatestRecencySeconds(recencyCookieName){var recencyValue=2*52*7*24*60*60;var lastSessionTime;try{lastSessionTime=parseInt(cookie.get(recencyCookieName),10);recencyValue=now-lastSessionTime;recencyValue=Math.round(recencyValue)}catch(x){}return recencyValue}
if(checkForVisitStart(this.recencySessionCookieName))updateCookiesAtVisitStart(this.recencyCookieName,this.recencySessionCookieName);else updateCookieWithLatestTime(this.recencyCookieName);this.metric=getLatestRecencySeconds(this.recencySessionCookieName);return true};return RecencyCondition}(Condition);var FrequencyCondition=function(_super){__extends(FrequencyCondition,_super);function FrequencyCondition(frequencyCookieName,persistentCookieSettings){_super.call(this);this.frequencyCookieName=frequencyCookieName;
this.frequencySessionCookieName=frequencyCookieName+"_s";this.persistentCookieSettings=persistentCookieSettings||{}}FrequencyCondition.prototype.compute=function(){var cookie=new CookieDataLayer(this.persistentCookieSettings);var initialVisitNumber=1;try{initialVisitNumber=parseInt(cookie.get(this.frequencyCookieName),10)||1}catch(e){}function checkForVisitStart(frequencySessionCookieName){return!cookie.get(frequencySessionCookieName)}function updateCookiesAtVisitStart(frequencyCookieName,frequencySessionCookieName){initialVisitNumber=
1;try{initialVisitNumber=(parseInt(cookie.get(frequencyCookieName),10)||0)+1}catch(e){}var c1=cookie.set(frequencySessionCookieName,initialVisitNumber,{session:true});var c2=cookie.set(frequencyCookieName,initialVisitNumber)}if(checkForVisitStart(this.frequencySessionCookieName))updateCookiesAtVisitStart(this.frequencyCookieName,this.frequencySessionCookieName);this.metric=initialVisitNumber;return true};return FrequencyCondition}(Condition);var PersistentCalculator=function(){function PersistentCalculator(calculatorCookieName,
persistentCookieSettings,defaultMetricValue){this.calculatorCookieName=calculatorCookieName;this.defaultMetricValue=parseFloat(""+defaultMetricValue)||0;this.persistentCookieSettings=persistentCookieSettings}PersistentCalculator.prototype.checkAndUpdate=function(trigger,increment){var inc=parseFloat(""+increment);var cookie=new CookieDataLayer(this.persistentCookieSettings);var currentMetric=parseFloat(cookie.get(this.calculatorCookieName))||this.defaultMetricValue;if(trigger){currentMetric=currentMetric+
inc;cookie.set(this.calculatorCookieName,currentMetric)}this.currentMetric=currentMetric;return currentMetric};PersistentCalculator.prototype.getMetric=function(){return this.currentMetric};return PersistentCalculator}()}catch(e){if(location.href.indexOf("testPropensity\x3dtrue")!==-1)console.error("Error Propensity: "+e)}})()},943574,[943556],302093,[288822]);